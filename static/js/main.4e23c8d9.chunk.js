(this["webpackJsonpstudierendenfutter-admin-panel"]=this["webpackJsonpstudierendenfutter-admin-panel"]||[]).push([[0],{157:function(e,t,a){e.exports=a(191)},186:function(e,t,a){},187:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(55),s=a.n(c),u=a(25),l=a(12),i=a(10),o=a(7),m=a.n(o),p=a(11),f=a(63),d=a(64),b=a(206),E=a(202),v=a(208),h=a(205),y=a(65),O=a.n(y);function j(e,t){return O.a.post(e,t)}var g={BACKEND_URL:"https://api.studierendenfutter.de"},w=g.BACKEND_URL+"/auth/login";function x(e){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(w,t);case 2:a=e.sent,n=a.data.token,window.localStorage.setItem("authToken",JSON.stringify({token:n}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){var e=Object(n.useState)({password:""}),t=Object(i.a)(e,2),a=t[0],c=t[1],s=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(a);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a,null,"Login"),r.a.createElement(E.a.Input,{label:"Password",type:"password",value:a.password,name:"password",onChange:function(e){var t=e.target,n=t.value,r=t.name;c(Object(d.a)({},a,Object(f.a)({},r,n)))}}),r.a.createElement(h.a,{type:"button",onClick:s},"Login"))))}function C(){return r.a.createElement("div",null,r.a.createElement(k,null))}function S(){return{authorization:"Bearer "+JSON.parse(window.localStorage.getItem("authToken")).token}}function D(e){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S(),e.prev=1,e.next=4,O.a.get(t,{headers:a});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var A=g.BACKEND_URL+"/stats";function _(){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(A);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var U=a(119),L=a.n(U);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear()+"-"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate();return t}a(186);function M(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a?r.a.createElement("div",null,r.a.createElement("h1",{className:"sf-stats-title"},"Admin Panel"),r.a.createElement("div",{className:"sf-stats-big-numbers"},r.a.createElement("div",{className:"sf-stats-big-number"},r.a.createElement("span",{className:"sf-stats-big-number-number"},a.activeUsers),r.a.createElement("span",null,"active users")),r.a.createElement("div",{className:"sf-stats-big-number"},r.a.createElement("span",{className:"sf-stats-big-number-number"},a.emailsSend),r.a.createElement("span",null,"emails send")),r.a.createElement("div",{className:"sf-stats-big-number"},r.a.createElement("span",{className:"sf-stats-big-number-number"},a.emailsOpened),r.a.createElement("span",null,"emails opened")),r.a.createElement("div",{className:"sf-stats-big-number"},r.a.createElement("span",{className:"sf-stats-big-number-number"},a.emailsSendToday),r.a.createElement("span",null,"send today")),r.a.createElement("div",{className:"sf-stats-big-number"},r.a.createElement("span",{className:"sf-stats-big-number-number"},a.emailsOpenedToday),r.a.createElement("span",null,"opened today")),r.a.createElement("div",{className:"sf-stats-big-number"},r.a.createElement("span",{className:"sf-stats-big-number-number"},(a.emailsOpenedToday/a.emailsSendToday*100).toFixed(2)),r.a.createElement("span",null,"% opened today"))),r.a.createElement("div",null,r.a.createElement("h2",{className:"sf-stats-heading"},"Emails send per day"),r.a.createElement(L.a,{options:{chart:{id:"sf-email-chart"},xaxis:{categories:a?a.emailsSendDaily.map((function(e){return R(new Date(e.date))})):[]}},series:[{name:"emails opened",data:a?a.emailsOpenedDaily.map((function(e){return e.count})):[]},{name:"emails send",data:a?a.emailsSendDaily.map((function(e){return e.count})):[]}],type:"line",width:"100%",height:320})),r.a.createElement("div",null,r.a.createElement("h2",{className:"sf-stats-heading"},"New Signups"),r.a.createElement(L.a,{options:{chart:{id:"sf-user-chart"},xaxis:{categories:a?a.userSignupsPerMonth.map((function(e){return e.year+"-"+e.month})):[]}},series:[{name:"signups",data:a?a.userSignupsPerMonth.map((function(e){return e.count})):[]}],type:"line",width:"100%",height:320}))):null}function K(){return function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(i.a)(a,2),c=r[0],s=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;s(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]}("authToken")}function T(){var e=K();return Object(i.a)(e,1)[0]?r.a.createElement(M,null):r.a.createElement(C,null)}var J=a(83);a(187);function P(e){var t=e.children,a=K(),c=Object(i.a)(a,1)[0],s=Object(n.useState)(!1),l=Object(i.a)(s,2),o=l[0],m=l[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"sf-admin-topbar"},r.a.createElement("div",null,r.a.createElement("h1",null,"Admin Panel")),c&&r.a.createElement(J.a,{className:"sf-admin-sidebar-button",onClick:function(){return m(!o)},name:"sidebar",size:"large"})),c&&r.a.createElement("div",{className:"sf-admin-sidebar ".concat(o?"sf-admin-sidebar-opened":"")},r.a.createElement(u.b,{as:"span",to:"/stats"},"Stats"),r.a.createElement(u.b,{as:"span",to:"/cities"},"Cities"),r.a.createElement(u.b,{as:"span",to:"/users"},"Users"),r.a.createElement(u.b,{as:"span",to:"/canteens"},"Canteens")),r.a.createElement("div",{className:"sf-admin-content"},t))}var F=a(204);function z(e){var t=e.columnNames,a=void 0===t?[]:t,n=e.content,c=void 0===n?[]:n;return r.a.createElement(F.a,{celled:!0},r.a.createElement(F.a.Header,null,r.a.createElement(F.a.Row,null,a.map((function(e){return r.a.createElement(F.a.HeaderCell,null,e)})))),r.a.createElement(F.a.Body,null,c.map((function(e){return r.a.createElement(F.a.Row,null,e.map((function(e){return r.a.createElement(F.a.Cell,null,e)})))}))))}var H=g.BACKEND_URL+"/cities";function Y(){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(H);case 3:return t=e.sent,e.abrupt("return",t.cities);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function G(){return(G=Object(p.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(),e.prev=1,e.next=4,O.a.put(t,a,{headers:n});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Q(e){!function(e,t){G.apply(this,arguments)}(g.BACKEND_URL+"/cities/"+e.id,e)}var V=a(210),W=a(203);function X(){var e=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];function c(){return s.apply(this,arguments)}function s(){return(s=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:c();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c()}),[]),[a,function(e){return u.apply(this,arguments)}]}(),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),l=Object(i.a)(s,2),o=l[0],f=l[1];return r.a.createElement("div",null,r.a.createElement(z,{columnNames:["ID","Name","On Semester Break","Actions"],content:a.map((function(e){return[e.id,e.city,r.a.createElement(V.a,{checked:!!e.is_semester_break,toggle:!0,onClick:function(){f(Object(d.a)({},e,{is_semester_break:!e.is_semester_break}))}}),r.a.createElement(h.a,{as:u.b,to:"/cities/".concat(e.id,"/meals"),icon:"food",primary:!0})]}))}),r.a.createElement(W.a,{open:!!o,onClose:function(){return f()},basic:!0},r.a.createElement(v.a,{icon:!0},r.a.createElement(J.a,{name:"pencil alternate"}),"Update City"),r.a.createElement(W.a.Content,null,r.a.createElement("p",{style:{textAlign:"center"}},"Are you sure you want to update"," ",o?o.city:"")),r.a.createElement(W.a.Actions,null,r.a.createElement(h.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return f()}},r.a.createElement(J.a,{name:"remove"})," No"),r.a.createElement(h.a,{color:"green",inverted:!0,onClick:function(){c(o),f()}},r.a.createElement(J.a,{name:"checkmark"})," Yes"))))}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.BACKEND_URL+"/cities/"+t+"/meals",e.prev=1,e.next=4,D(a);case 4:return n=e.sent,e.abrupt("return",n.meals);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ee(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],c=a[1];function s(){return(s=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e);case 2:a=t.sent,c(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),[r]}function te(e){var t=e.meals;return t?r.a.createElement(z,{columnNames:["Id","Canteen","Meal Name","Prices","Types","Date","Action"],content:t.reduce((function(e,t){return e.concat(t.meals.map((function(e){return[e.id,t.name,e.name,e.prices.map((function(e){return r.a.createElement("span",null,e.price,"/")})),e.types.map((function(e){return r.a.createElement("img",{style:{height:"15px"},alt:e.name,src:e.icon_url})})),e.date,r.a.createElement(h.a,{as:u.b,to:"/meals/".concat(e.id),icon:"edit",primary:!0})]})))}),[])}):null}function ae(){var e=ee(Object(l.f)().cityId),t=Object(i.a)(e,1)[0];return t?r.a.createElement(te,{meals:t}):null}a(189),a(190);var ne=g.BACKEND_URL+"/users";function re(){return ce.apply(this,arguments)}function ce(){return(ce=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(ne);case 3:return t=e.sent,e.abrupt("return",t.users);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function se(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];function c(){return(c=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){c.apply(this,arguments)}()}),[]),[a]}function ue(){var e=se(),t=Object(i.a)(e,1)[0];return r.a.createElement(z,{columnNames:["ID","Email","Confirmed"],content:t.map((function(e){return[e.id,e.email,""+!!e.confirmed]}))})}function le(e){var t=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return t?"?"+t:""}function ie(e){var t=le(e);return D(g.BACKEND_URL+"/canteens"+t)}function oe(){var e=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){function t(){return(t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:a=t.sent,c(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r}({city:"M\xfcnster"});return e?r.a.createElement(z,{columnNames:["ID","Name","Address","City","Type","Actions"],content:e.map((function(e){return[e.id,e.name,e.address,e.city,e.type,r.a.createElement("div",null,r.a.createElement(h.a,{as:u.b,to:"/canteens/".concat(e.id,"/meals"),icon:"food",primary:!0}))]}))}):null}function me(e,t){var a=le(t);return D(g.BACKEND_URL+"/canteens/"+e+"/meals"+a)}function pe(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(n.useState)(),r=Object(i.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){function a(){return(a=Object(p.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me(e,t);case 2:n=a.sent,s(n);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),[c]}(Object(l.f)().canteenId),t=Object(i.a)(e,1)[0];return r.a.createElement(te,{meals:t})}function fe(e){var t=e.meal,a=e.setMeal;if(!t)return null;var n=function(e){var n=e.target,r=n.name,c=n.value;a(Object(d.a)({},t,Object(f.a)({},r,c)))};return r.a.createElement(E.a,null,r.a.createElement(v.a,null,"Create Meal"),r.a.createElement(E.a.Input,{value:t.canteen_id,label:"Canteen Id",type:"number",name:"canteen_id",onChange:n}),r.a.createElement(E.a.Input,{value:t.name,label:"Name",name:"name",onChange:n}),r.a.createElement(E.a.Input,{value:t.date,label:"Date",name:"date",onChange:n}))}function de(){var e=Object(n.useState)({canteenId:0,name:"",price:"",date:R()}),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(fe,{meal:a,setMeal:c}),r.a.createElement("br",null),r.a.createElement(h.a,{icon:"send",positive:!0},"Create"))}function be(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.BACKEND_URL+"/meals/"+t,e.prev=1,e.next=4,D(a);case 4:return n=e.sent,e.abrupt("return",n.meal);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ve(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1];function s(){return(s=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be(e);case 2:a=t.sent,c(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),[r,c]}function he(){var e=ve(Object(l.f)().mealId),t=Object(i.a)(e,2),a=t[0],n=t[1];return console.log(a),r.a.createElement(fe,{meal:a,setMeal:n})}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,null,r.a.createElement(P,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(T,null)),r.a.createElement(l.a,{exact:!0,path:"/stats"},r.a.createElement(M,null)),r.a.createElement(l.a,{exact:!0,path:"/canteens"},r.a.createElement(oe,null)),r.a.createElement(l.a,{exact:!0,path:"/canteens/:canteenId/meals"},r.a.createElement(pe,null)),r.a.createElement(l.a,{exact:!0,path:"/cities"},r.a.createElement(X,null)),r.a.createElement(l.a,{exact:!0,path:"/cities/:cityId/meals"},r.a.createElement(ae,null)),r.a.createElement(l.a,{exact:!0,path:"/meals/create"},r.a.createElement(de,null)),r.a.createElement(l.a,{exact:!0,path:"/meals/:mealId"},r.a.createElement(he,null)),r.a.createElement(l.a,{exact:!0,path:"/users"},r.a.createElement(ue,null)))))),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.4e23c8d9.chunk.js.map